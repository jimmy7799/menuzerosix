<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ZERO SIX SKY LOUNGE - ORDER</title>

<style>
  :root{
    --bg: #0b2f40;
    --panel: #0f3b52;
    --panel2: #0a2633;

    --text: #f6f1e6;
    --muted: #c9c2b6;

    --accent: #50a9a7;     /* teal */
    --gold: #f0bb3f;       /* main gold */
    --sand: #dca364;       /* soft gold */
    --bronze: #bb5e20;     /* hover / deep accent */

    --stroke: rgba(240,187,63,.35);
    --shadow: 0 10px 24px rgba(0,0,0,.35);
  }

  body{
    font-family:Arial;
    background: radial-gradient(1200px 500px at 50% -10%, rgba(240,187,63,.18), transparent 60%),
                radial-gradient(900px 450px at 100% 0%, rgba(80,169,167,.18), transparent 55%),
                var(--bg);
    color:var(--text);
    padding:12px
  }

  h1{
    font-size:20px;
    text-align:center;
    color:var(--gold);
    letter-spacing:.6px;
    text-shadow: 0 0 18px rgba(240,187,63,.25);
  }
  h2{
    font-size:14px;
    text-align:center;
    margin-bottom:15px;
    color:var(--muted);
    opacity:.95;
  }

  .box{
    background: linear-gradient(180deg, rgba(15,59,82,.92), rgba(10,38,51,.92));
    padding:12px;
    border-radius:14px;
    margin-bottom:12px;
    box-shadow: var(--shadow);
    border:1px solid rgba(240,187,63,.18);
    backdrop-filter: blur(2px);
  }

  label{font-size:13px;color:rgba(240,187,63,.92)}

  input,textarea,select{
    width:100%;
    padding:9px 10px;
    border-radius:10px;
    border:1px solid rgba(80,169,167,.25);
    margin-top:6px;
    margin-bottom:10px;
    font-size:14px;
    background: rgba(11,47,64,.55);
    color:var(--text);
    outline:none;
    box-shadow: inset 0 0 0 1px rgba(0,0,0,.12);
  }
  input:focus, textarea:focus, select:focus{
    border-color: rgba(240,187,63,.65);
    box-shadow: 0 0 0 3px rgba(240,187,63,.12);
  }
  input::placeholder, textarea::placeholder{color:rgba(201,194,182,.72)}

  /* Search row */
  .search-row{display:flex;gap:8px;align-items:center}
  .search-row input{margin-bottom:0}
  .search-btn{padding:9px 12px;border-radius:10px}

  /* Accordion header */
  .acc{
    background: linear-gradient(135deg, rgba(240,187,63,.95), rgba(220,163,100,.9));
    color:#2a1b08;
    padding:10px 12px;
    border-radius:12px;
    margin-top:10px;
    cursor:pointer;
    font-weight:bold;
    font-size:14px;
    box-shadow: 0 10px 20px rgba(0,0,0,.25);
    display:flex;
    justify-content:space-between;
    align-items:center;
    border:1px solid rgba(0,0,0,.12);
  }
  .acc small{opacity:.75;font-weight:700}

  .panel{display:none;padding:8px 4px}

  .menu{
    border-bottom:1px dashed rgba(240,187,63,.35);
    padding-bottom:10px;
    margin-bottom:10px;
    font-size:13px
  }
  .row{display:flex;justify-content:space-between;align-items:center;gap:6px}

  button{
    background: linear-gradient(135deg, rgba(240,187,63,.95), rgba(220,163,100,.92));
    border:none;
    padding:5px 10px;
    border-radius:8px;
    cursor:pointer;
    font-size:14px;
    color:#2a1b08;
    font-weight:800;
    box-shadow: 0 8px 16px rgba(0,0,0,.18);
  }
  button:hover{
    background: linear-gradient(135deg, rgba(187,94,32,.95), rgba(240,187,63,.95));
    color:#1a0f05;
  }
  .qty{margin:0 6px;color:var(--gold);font-weight:900;text-shadow:0 0 12px rgba(240,187,63,.22)}

  .total-box{
    text-align:center;
    font-size:18px;
    font-weight:900;
    color:var(--gold);
    margin-top:10px;
    background: linear-gradient(135deg, rgba(10,38,51,.95), rgba(15,59,82,.95));
    border:1px solid rgba(240,187,63,.25);
  }

  .send{
    width:100%;
    padding:12px;
    font-size:15px;
    background: linear-gradient(135deg, rgba(187,94,32,.95), rgba(240,187,63,.95));
    border:none;
    border-radius:12px;
    color:#1a0f05;
    font-weight:900;
    letter-spacing:.2px;
  }
  .send:hover{filter: brightness(1.03); transform: translateY(-1px)}
  .send:active{transform: translateY(0px)}

  .muted{font-size:12px;color:rgba(201,194,182,.8);margin-top:-6px;margin-bottom:10px}

  .search-title{
    margin-top:10px;
    padding:10px 12px;
    border-radius:12px;
    background: linear-gradient(135deg, rgba(80,169,167,.22), rgba(11,47,64,.65));
    color:var(--text);
    font-weight:800;
    font-size:13px;
    border:1px solid rgba(80,169,167,.22);
  }
  .empty{
    padding:12px;
    border-radius:12px;
    background: rgba(11,47,64,.55);
    border:1px dashed rgba(240,187,63,.35);
    color:rgba(201,194,182,.9);
    margin-top:10px;
    font-size:13px;
  }

  .varian-label{font-size:12px;color:rgba(240,187,63,.9)}
</style>
</head>

<body>

<h1>ZERO SIX SKY LOUNGE</h1>
<h2>Reservasi & Order Menu</h2>

<div class="box">
  <label>Nama Pembeli</label>
  <input id="nama" placeholder="Nama lengkap" />

  <label>Tanggal Reservasi</label>
  <input type="date" id="tanggal" />

  <label>Jam Reservasi</label>
  <input type="time" id="jam" />

  <label>Event</label>
  <input id="eventName" placeholder="Contoh: Birthday Party" />

  <label>Lokasi</label>
  <select id="lokasi">
    <option value="">Pilih Lokasi</option>
    <option>Indoor</option>
    <option>Outdoor</option>
  </select>

  <label>Jumlah Pax</label>
  <input type="number" id="pax" min="1" placeholder="Jumlah orang" />

  <label>Cari Menu</label>
  <div class="search-row">
    <input id="search" placeholder="Ketik nama menu... (contoh: kebuli, jeddah, indomie, latte)" />
    <button type="button" class="search-btn" onclick="applySearch()">Search</button>
  </div>
  <div class="muted" style="margin-top:6px">
    Tips: tekan Enter untuk cari. Kosongkan untuk tampilkan semua.
  </div>
</div>

<div class="box" id="menu"></div>

<div class="box total-box">
  TOTAL PESANAN<br />
  Rp <span id="total">0</span>
</div>

<div class="box">
  <label>Catatan Umum</label>
  <textarea id="note" placeholder="Catatan tambahan..."></textarea>
  <button class="send" type="button" onclick="sendWA()">Kirim ke WhatsApp</button>
  <div class="muted">Pesan akan otomatis dibuka ke WhatsApp dengan format rapi.</div>
</div>

<script>
/* ========= DATA (FULL MENU) =========
   Struktur: CATEGORY -> ITEMS langsung (tanpa "MENU" / "ADD ON" / sub-menu)
*/
const data = {
  "ARABIAN NIGHT MENU": {
    "Nasi Kebuli": 30000,

    "Jeddah": { price: 35000, days: [1,4] },          // Senin(1) & Kamis(4)
    "Shafah Marwah": { price: 35000, days: [2,5] },   // Selasa(2) & Jumat(5)
    "Makkah": { price: 35000, days: [3,6] },          // Rabu(3) & Sabtu(6)
    "Madinah": { price: 35000, days: [0] }            // Minggu(0)
  },

  "SPECIAL PARADISE": {
    "Bakmi Goreng": 20000,
    "Nasi Goreng Special": 25000,

    "Indomie 06": { price: 8000, options: ["Kuah","Goreng"] },
    "Indomie Special 06": { price: 12000, options: ["Kuah","Goreng"] },

    "Indomie SUPER HOT Lvl 1–5": { price: 14000, options: ["Kuah","Goreng"] },
    "Indomie SUPER HOT Lvl 6–10": { price: 14000, options: ["Kuah","Goreng"] },

    "Indomie Goreng Sambal Matah": 14000,
    "Indomie Goreng Chicken Black Pepper": 15000
  },

  "CITA RASA NUSANTARA": {
    "Nasi Ayam Sambal Hijau": 20000,
    "Nasi Ayam Tempong": 25000,
    "Nasi Bakar": 15000,
    "Sego Sambel": 10000,
    "Nasi Tahu & Tempe Sambal Seger": 10000,
    "Nasi Ayam Geprek": 20000
  },

  "CHEF'S SELECTION": {
    "Pasta Carbonara": { price: 25000, options: ["Fusili","Penne","Makaroni"] },
    "Pasta Butter Cheese": { price: 20000, options: ["Fusili","Penne","Makaroni"] },
    "Pasta Bolognese": { price: 20000, options: ["Fusili","Penne","Makaroni"] },

    "Rice Bowl Chicken Brown Sauce": 20000,
    "Rice Bowl Chicken Black Pepper": 25000,
    "Rice Bowl Chicken Sambal Matah": 20000,

    "Chicken Steak": 25000,
    "Tender Beef Steak": 35000
  },

  "ADDITIONAL": {
    "Nasi Putih": 5000,
    "Sambal": 4000,
    "Sauce Steak": 5000,
    "Telur": 5000,
    "Charge Take Away": 1000,
    "Additional Boba": 3000
  },

  "ARABIAN NIGHT SNACK": {
    "Kebab 06": 12000,
    "Martabak Mini": 12000,
    "Samosa": 15000,

    "Roti Maryam Original": 8000,
    "Roti Maryam Chocolate": 10000,
    "Roti Maryam Cheese": 12000,
    "Roti Maryam Chocolate Cheese": 15000
  },

  "SNACK": {
    "Beef Burger": 20000,
    "Chicken Burger": 15000,
    "Chicken Lolipop": 18000,
    "French Fries": 15000,
    "Jamur Crispy": 12000,
    "Lumpia Rebung": 12000,
    "Onion Ring": 15000,
    "Potato Wedges": 15000,
    "Puding": 5000,
    "Sosis Solo": 12000,
    "Tahu Crispy": 10000,
    "Tahu Mercon": 12000
  },

  "DESSERT": {
    "Banana Original": { price: 10000, options: ["Kress","Bakar"] },
    "Banana Chocolate": { price: 12000, options: ["Kress","Bakar"] },
    "Banana Cheese": { price: 12000, options: ["Kress","Bakar"] },
    "Banana Chocolate Cheese": { price: 15000, options: ["Kress","Bakar"] },

    "Toast Bread Ovomaltine": 12000,
    "Toast Bread Keju Gondrong": 15000,
    "Toast Bread Ovo - Cheese": 18000,

    "Brownies Choco Lava": 20000,
    "Brownies Matcha Lava": 20000,
    "Brownies Strawberry Lava": 20000,
    "Brownies Vanilla Lava": 20000
  },

  "ARABIAN DRINK": {
    "Kopi Kurma": { price: 25000, options: ["Hot","Ice"] },
    "Kopi Yaman": { price: 25000, options: ["Hot","Ice"] },

    "Kopi Al Khomar": 18000,
    "Kharak Chai (Tea)": 18000,
    "Rose Sparkling": 18000,
    "Blue Lemonade": 18000,
    "Arabian Nights Sparkling": 18000,
    "Grenadine Sparkling": 18000,
    "Butterfly Bloom Sparkling": 18000,

    "Rose Milk": { price: 18000, options: ["Hot","Ice"] },
    "Kurma Milk": { price: 18000, options: ["Hot","Ice"] },
    "Grenadine Milk": { price: 18000, options: ["Hot","Ice"] },

    "Pandan Kacang Hijau Milk": 18000
  },

  "COFFEE ADDICT": {
    "Brewed Coffee (Kopi Hitam)": 10000,
    "Americano": { price: 15000, options: ["Hot","Ice"] },
    "Long Black": { price: 15000, options: ["Hot","Ice"] },
    "Coffee Latte": { price: 18000, options: ["Hot","Ice"] },
    "Cappucinno": { price: 18000, options: ["Hot","Ice"] },

    "Affogato Single Shot": { price: 15000, options: ["VNL","Choco"] },

    "Bon Bon / Sanger": 15000,
    "Caramel Macchiato": 25000,
    "Espresso Single Shot": 10000,
    "Flat White": 18000,
    "Ice Coffee Matcha": 18000,

    "Additional Shot": 5000
  },

  "TEA SERIES": {
    "Butterfly Pea Tea": { price: 15000, options: ["Hot","Ice"] },
    "Chamomile Tea": { price: 15000, options: ["Hot","Ice"] },
    "Green Thai Tea": { price: 15000, options: ["Hot","Ice"] },
    "Jasmine Tea": { price: 15000, options: ["Hot","Ice"] },
    "Lemon Tea": { price: 15000, options: ["Hot","Ice"] },
    "Lychee Tea": { price: 15000, options: ["Hot","Ice"] },
    "Peach Tea": { price: 15000, options: ["Hot","Ice"] },
    "Thai Tea": { price: 15000, options: ["Hot","Ice"] },

    "Tea Party": { price: 50000, options: ["Only Hot"] }
  },

  "MINUMAN": {
    "Choco": { price: 15000, options: ["Hot","Ice"] },
    "Jahe": { price: 15000, options: ["Hot","Ice"] },
    "Millo": { price: 10000, options: ["Hot","Ice"] },
    "Pure Orange Juice": { price: 12000, options: ["Hot","Ice"] },

    "06 Squash Drink": 8000,
    "Banana Split 06": 10000,

    "Brown Sugar Boba Fresh Milk": 18000,
    "Brown Sugar Boba Milk Tea": 18000,

    "Es Tape Ketan Ireng": 20000,
    "Ice Cream": 12000,
    "Mineral Water": 5000,

    "Mojito": 15000,
    "Soda Gembira": 20000,
    "Soda Lychee": 20000
  },

  "MILK BASE": {
    "Frappe Chocolate": 20000,
    "Frappe Hazelnut": 20000,
    "Frappe Matcha": 20000,
    "Frappe Taro": 20000,
    "Frappe Taro Oreo": 20000,

    "Milk Shake Chocolate": 18000,
    "Milk Shake Strawberry": 18000,
    "Milk Shake Vanilla": 18000,
    "Milk Shake Oreo": 18000,
    "Milk Shake Regal": 18000,
    "Milk Shake Regal Oreo": 22000,

    "Yakult Lychee": 15000,
    "Yakult Mango": 15000,
    "Yakult Strawberry": 15000
  },

  "LATTE": {
    "Choco Latte": { price: 18000, options: ["Hot","Ice"] },
    "Choco Matcha Latte": { price: 18000, options: ["Hot","Ice"] },
    "Hazelnut Latte": { price: 18000, options: ["Hot","Ice"] },
    "Matcha Latte": { price: 18000, options: ["Hot","Ice"] },
    "Red Velvet Latte": { price: 18000, options: ["Hot","Ice"] },
    "Tiramisu Latte": { price: 18000, options: ["Hot","Ice"] }
  },

  "SMOOTHIES": {
    "Apple Peach Delight": 25000,
    "Chocolate Avocado Bliss": 25000,
    "Mango Berry Fusion": 25000,
    "Banana Berry Smoothie": 25000,

    "Additional Cheese": 5000,
    "Additional Choco": 5000
  }
};

/* ========= CART ========= */
let cart = {}; // cart[id] = { name,q,p,id,note,option,meta,isDailySpecial }
let total = 0;

function formatRp(n){ return Number(n || 0).toLocaleString("id-ID"); }
function getItemPrice(val){
  if (typeof val === "number") return val;
  if (val && typeof val === "object" && typeof val.price === "number") return val.price;
  return 0;
}
function updateTotal(){
  document.getElementById("total").innerText = formatRp(total);
}

/* ========= DAY FILTER ========= */
function getSelectedDayIndex(){
  const tanggalEl = document.getElementById("tanggal");
  const v = tanggalEl?.value;
  if (!v) return null;
  const d = new Date(v + "T00:00:00");
  if (Number.isNaN(d.getTime())) return null;
  return d.getDay(); // 0 Minggu ... 6 Sabtu
}
function isDailyAvailable(itemVal){
  if (!itemVal || typeof itemVal !== "object" || !Array.isArray(itemVal.days)) return true;
  const day = getSelectedDayIndex();
  if (day === null) return false; // belum pilih tanggal => daily tidak tampil
  return itemVal.days.includes(day);
}
function purgeInvalidDailyFromCart(){
  const day = getSelectedDayIndex();
  if (day === null) return;

  let removedAny = false;
  for (const id in cart){
    const it = cart[id];
    if (it?.isDailySpecial){
      const meta = it.meta;
      if (!meta) continue;

      const itemVal = data?.[meta.category]?.[meta.itemName];
      if (!itemVal || !isDailyAvailable(itemVal)){
        total -= (it.q * it.p);
        delete cart[id];
        removedAny = true;
      }
    }
  }
  if (removedAny){
    updateTotal();
    alert("Menu harian yang tidak sesuai dengan hari pada tanggal reservasi otomatis dihapus dari pesanan.");
  }
}

/* ========= SEARCH ========= */
let searchQuery = "";

document.addEventListener("DOMContentLoaded", () => {
  const s = document.getElementById("search");
  if (s){
    s.addEventListener("input", applySearch);
    s.addEventListener("keydown", (e) => {
      if (e.key === "Enter"){
        e.preventDefault();
        applySearch();
      }
    });
  }

  const tanggalEl = document.getElementById("tanggal");
  if (tanggalEl){
    tanggalEl.addEventListener("change", () => {
      purgeInvalidDailyFromCart();
      render();
    });
  }
});

function applySearch(){
  const s = document.getElementById("search");
  searchQuery = (s?.value || "").trim().toLowerCase();
  render();
}

/* ========= HELPERS ========= */
function makeId(category, itemName){
  return (category + "_" + itemName).toLowerCase().replace(/[^a-z0-9]/gi,'_');
}
function safeText(s){ return String(s).replace(/'/g,"\\'"); }
function escapeHtml(s){
  return String(s || "")
    .replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")
    .replace(/"/g,"&quot;").replace(/'/g,"&#039;");
}

function ensureCartItem(id, name, price, meta, isDailySpecial){
  if (!cart[id]){
    cart[id] = { name, q: 0, p: price, id, note: "", option: "", meta, isDailySpecial: !!isDailySpecial };
  } else {
    cart[id].name = name;
    cart[id].p = price;
    cart[id].meta = meta;
    cart[id].isDailySpecial = !!isDailySpecial;
  }
  return cart[id];
}
function saveNote(id){
  const el = document.getElementById("n_" + id);
  if (!el) return;
  if (!cart[id]) cart[id] = { name:"", q:0, p:0, id, note:"", option:"" };
  cart[id].note = el.value;
}
function saveOption(id){
  const el = document.getElementById("o_" + id);
  if (!el) return;
  if (!cart[id]) cart[id] = { name:"", q:0, p:0, id, note:"", option:"" };
  cart[id].option = el.value;
}

/* ========= ITEM RENDER ========= */
function renderItem(category, itemName, itemVal){
  if (!isDailyAvailable(itemVal)) return "";

  const price = getItemPrice(itemVal);
  const id = makeId(category, itemName);
  const safeName = safeText(itemName);

  const meta = { category, itemName };
  const isDailySpecial = (itemVal && typeof itemVal === "object" && Array.isArray(itemVal.days));
  const it = ensureCartItem(id, itemName, price, meta, isDailySpecial);

  let optHtml = "";
  if (itemVal && typeof itemVal === "object" && Array.isArray(itemVal.options) && itemVal.options.length){
    const current = it.option || "";
    const opts = itemVal.options.map(o => {
      const selected = (o === current) ? "selected" : "";
      return `<option value="${escapeHtml(o)}" ${selected}>${escapeHtml(o)}</option>`;
    }).join("");

    optHtml = `
      <label class="varian-label">Varian</label>
      <select id="o_${id}" onchange="saveOption('${id}')">
        <option value="">Pilih varian</option>
        ${opts}
      </select>
    `;
  }

  return `
    <div class="menu">
      <div class="row">
        <span>${escapeHtml(itemName)}<br>Rp ${formatRp(price)}</span>
        <div>
          <button type="button" onclick="add('${safeName}', ${price}, '${id}')">+</button>
          <span class="qty" id="q_${id}">${it.q || 0}</span>
          <button type="button" onclick="remove('${safeName}', ${price}, '${id}')">-</button>
        </div>
      </div>
      ${optHtml}
      <textarea id="n_${id}" placeholder="Catatan menu ini..." oninput="saveNote('${id}')">${escapeHtml(it.note || "")}</textarea>
    </div>
  `;
}

/* ========= RENDER MAIN ========= */
function render(){
  const menuEl = document.getElementById("menu");
  let html = "";

  if (searchQuery){
    html += `<div class="search-title">Hasil Pencarian: "${escapeHtml(searchQuery)}"</div>`;
    let found = 0;

    for (const category in data){
      const items = data[category];
      for (const itemName in items){
        const itemVal = items[itemName];
        if (!isDailyAvailable(itemVal)) continue;

        const hay = (category + " " + itemName).toLowerCase();
        if (!hay.includes(searchQuery)) continue;

        const block = renderItem(category, itemName, itemVal);
        if (!block) continue;

        found++;
        html += block;
      }
    }

    if (found === 0){
      html += `<div class="empty">Tidak ada menu yang cocok. Coba kata lain (contoh: kebuli, jeddah, indomie, latte).</div>`;
    }

    menuEl.innerHTML = html;
    return;
  }

  let catIndex = 0;
  for (const category in data){
    html += `
      <div class="acc" onclick="toggleCat(${catIndex})">
        <span>${escapeHtml(category)}</span>
        <small>Click</small>
      </div>
      <div class="panel" id="cat_${catIndex}">
    `;

    const items = data[category];
    let anyShown = false;

    for (const itemName in items){
      const block = renderItem(category, itemName, items[itemName]);
      if (block){
        anyShown = true;
        html += block;
      }
    }

    if (!anyShown){
      html += `<div class="empty">Tidak ada menu tersedia.</div>`;
    }

    html += `</div>`;
    catIndex++;
  }

  menuEl.innerHTML = html;
}
render();

/* ========= TOGGLES ========= */
function toggleCat(catIndex){
  const cats = document.querySelectorAll(".panel");
  cats.forEach((p, idx) => {
    if (idx === catIndex){
      p.style.display = (p.style.display === "block") ? "none" : "block";
    } else {
      p.style.display = "none";
    }
  });
}

/* ========= CART OPS ========= */
function add(name, price, id){
  if (!cart[id]) cart[id] = { name, q: 0, p: price, id, note: "", option: "", meta: null, isDailySpecial: false };
  cart[id].q++;
  total += price;

  const qEl = document.getElementById("q_" + id);
  if (qEl) qEl.innerText = cart[id].q;

  updateTotal();
}

function remove(name, price, id){
  if (cart[id] && cart[id].q > 0){
    cart[id].q--;
    total -= price;

    const qEl = document.getElementById("q_" + id);
    if (qEl) qEl.innerText = cart[id].q;

    if (cart[id].q === 0) delete cart[id];
    updateTotal();
  }
}

/* ========= WA ========= */
function formatTanggalId(iso){
  if (!iso) return "";
  const [y,m,d] = iso.split("-");
  if (!y || !m || !d) return iso;
  return `${d}/${m}/${y}`;
}

function sendWA(){
  const nama = document.getElementById("nama");
  const tanggal = document.getElementById("tanggal");
  const jam = document.getElementById("jam");
  const eventName = document.getElementById("eventName");
  const lokasi = document.getElementById("lokasi");
  const pax = document.getElementById("pax");
  const note = document.getElementById("note");

  if(!nama.value || !tanggal.value || !jam.value || !eventName.value || !lokasi.value || !pax.value){
    alert("Lengkapi data reservasi");
    return;
  }

  purgeInvalidDailyFromCart();

  let t = `RESERVASI ZERO SIX SKY LOUNGE\n\n`;
  t += `Nama: ${nama.value}\n`;
  t += `Tanggal: ${formatTanggalId(tanggal.value)}\n`;
  t += `Jam: ${jam.value}\n`;
  t += `Event: ${eventName.value}\n`;
  t += `Lokasi: ${lokasi.value}\n`;
  t += `Pax: ${pax.value}\n\n`;

  let i = 1;
  for (const id in cart){
    const it = cart[id];
    if (it.q > 0){
      const catatan = it.note || "";
      const opsi = it.option || "";
      const lineTotal = it.q * it.p;

      t += `${i}. ${it.name}${opsi ? ` (${opsi})` : ""} x${it.q} = Rp ${formatRp(lineTotal)}\n`;
      if (catatan) t += `   Catatan: ${catatan}\n`;
      i++;
    }
  }

  if (note.value){
    t += `\nCatatan Umum:\n${note.value}\n`;
  }

  t += `\nTOTAL: Rp ${formatRp(total)}`;

  window.open(`https://wa.me/6285175313330?text=${encodeURIComponent(t)}`);
}
</script>

</body>
</html>
